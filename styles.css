/* =========================================================
   styles.css — UNIMAR • Fábrica de Projetos — PREMIUM APP UI
   - Layout 2 colunas (desktop): Sidebar sticky + Conteúdo
   - Mobile: Drawer + overlay + noScroll
   - Dark mode lindo + Professor mode clean
   - Cards glass premium, botões refinados, tipografia e espaçamento
   - Print/PDF perfeito
   ========================================================= */

/* -------------------------
   RESET
-------------------------- */
*,
*::before,
*::after { box-sizing: border-box; }

html, body { height: 100%; }

body {
  margin: 0;
  font-family: "Inter", system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
  -webkit-font-smoothing: antialiased;
  text-rendering: geometricPrecision;
  line-height: 1.55;
  background: var(--bg);
  color: var(--text);
}

img, svg, video, canvas { max-width: 100%; height: auto; }
button, input, select, textarea { font: inherit; }
a { color: inherit; text-decoration: none; }
a:hover { text-decoration: underline; }

html { scroll-behavior: smooth; }
@media (prefers-reduced-motion: reduce){
  html { scroll-behavior: auto; }
  *, *::before, *::after { transition: none !important; animation: none !important; }
}

/* -------------------------
   THEME TOKENS
-------------------------- */
:root{
  /* Brand */
  --primary: #0b3b91;
  --primary2: #2563eb;
  --accent: #10b981;
  --warn: #f59e0b;
  --danger: #ef4444;

  /* Neutrals */
  --bg: #f5f7ff;
  --text: #0b1220;
  --muted: #44506a;
  --muted2: #6b7a9b;

  /* Surfaces */
  --card: rgba(255,255,255,.78);
  --card2: rgba(255,255,255,.65);
  --stroke: rgba(120,140,170,.22);

  /* Shadows (mais realistas) */
  --sh1: 0 10px 22px rgba(2,6,23,.10);
  --sh2: 0 20px 50px rgba(2,6,23,.14);
  --sh3: 0 30px 90px rgba(2,6,23,.18);

  /* Glass */
  --blur: blur(16px);
  --ring: 0 0 0 4px rgba(37,99,235,.18);

  /* Radius */
  --r-xl: 26px;
  --r-lg: 20px;
  --r-md: 16px;
  --r-sm: 12px;

  /* Layout */
  --max: 1220px;
  --sidebar: 360px;

  /* Background gradients (bonitos e discretos) */
  --bggrad:
    radial-gradient(900px 520px at 10% -10%, rgba(37,99,235,.22), transparent 60%),
    radial-gradient(900px 520px at 95% 0%, rgba(11,59,145,.16), transparent 60%),
    radial-gradient(700px 520px at 50% 110%, rgba(16,185,129,.12), transparent 60%);

  /* Typography */
  --h1: clamp(22px, 2.2vw, 34px);
  --h2: 17px;
  --p: 15.5px;

  /* Touch */
  --tap: 44px;
}

@media (prefers-color-scheme: dark){
  :root{
    --bg: #070b14;
    --text: #eaf1ff;
    --muted: #b5c2de;
    --muted2: #9db0d6;

    --card: rgba(14,20,34,.62);
    --card2: rgba(14,20,34,.44);
    --stroke: rgba(148,163,184,.18);

    --sh1: 0 12px 24px rgba(0,0,0,.35);
    --sh2: 0 22px 60px rgba(0,0,0,.45);
    --sh3: 0 38px 120px rgba(0,0,0,.55);

    --ring: 0 0 0 4px rgba(96,165,250,.18);

    --bggrad:
      radial-gradient(900px 520px at 10% -10%, rgba(96,165,250,.16), transparent 60%),
      radial-gradient(900px 520px at 95% 0%, rgba(37,99,235,.12), transparent 60%),
      radial-gradient(700px 520px at 50% 110%, rgba(52,211,153,.10), transparent 60%);
  }
}

/* Professor mode: ultra clean */
html[data-prof="1"]{
  --bg: #ffffff;
  --text: #0b1220;
  --muted: #334155;
  --muted2: #475569;
  --card: #ffffff;
  --card2: #ffffff;
  --stroke: rgba(15,23,42,.16);
  --sh1: 0 8px 16px rgba(2,6,23,.06);
  --sh2: 0 12px 26px rgba(2,6,23,.08);
  --sh3: 0 18px 40px rgba(2,6,23,.08);
  --blur: blur(0px);
  --bggrad: none;
}

/* -------------------------
   A11Y
-------------------------- */
:focus-visible{
  outline: none;
  box-shadow: var(--ring);
  border-radius: 14px;
}

::selection{
  background: rgba(37,99,235,.22);
}

/* Skip link */
.skipLink{
  position: fixed;
  top: 10px;
  left: 10px;
  z-index: 99999;
  padding: 10px 12px;
  border-radius: 999px;
  background: var(--card);
  border: 1px solid var(--stroke);
  box-shadow: var(--sh1);
  transform: translateY(-160%);
  transition: transform .2s ease;
}
.skipLink:focus{ transform: translateY(0); }

/* -------------------------
   PAGE
-------------------------- */
.page{
  min-height: 100vh;
  display: grid;
  place-items: start center;
  padding: 28px 16px 70px;
  background: var(--bggrad), var(--bg);
}

/* -------------------------
   HEADER TOP
-------------------------- */
.top{
  width: min(var(--max), 100%);
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 16px;

  padding: 16px 16px;
  border-radius: var(--r-xl);
  background: linear-gradient(180deg, var(--card), var(--card2));
  border: 1px solid var(--stroke);
  backdrop-filter: var(--blur);
  box-shadow: var(--sh2);

  position: sticky;
  top: 12px;
  z-index: 70;
}

.brand{
  display: flex;
  align-items: center;
  gap: 12px;
  min-width: 260px;
}
.seal{
  width: 46px;
  height: 46px;
  border-radius: 16px;
  display: grid;
  place-items: center;
  font-weight: 900;
  color: #fff;
  background: linear-gradient(135deg, var(--primary), var(--primary2));
  box-shadow: 0 18px 40px rgba(11,59,145,.22);
  user-select: none;
}
.brandText strong{
  display: block;
  font-size: 14px;
  letter-spacing: .2px;
}
.brandText span{
  display: block;
  font-size: 12px;
  color: var(--muted2);
  margin-top: 2px;
}

.docMeta{
  text-align: right;
  color: var(--muted2);
  font-size: 12.5px;
  line-height: 1.45;
}
.docMeta b{ color: var(--text); font-weight: 900; }

.topRight{ display:none; }

/* -------------------------
   ICON BUTTON (drawer)
-------------------------- */
.iconBtn{
  width: var(--tap);
  height: var(--tap);
  border-radius: 14px;
  border: 1px solid var(--stroke);
  background: linear-gradient(180deg, var(--card), var(--card2));
  backdrop-filter: var(--blur);
  box-shadow: var(--sh1);
  cursor: pointer;
  font-weight: 900;
  color: var(--text);
  transition: transform .15s ease, filter .15s ease;
}
.iconBtn:hover{ transform: translateY(-1px); filter: brightness(1.03); }
.iconBtn:active{ transform: translateY(0); filter: brightness(.98); }

/* -------------------------
   CONTENT WRAPPER
-------------------------- */
.content{
  width: min(var(--max), 100%);
  margin-top: 16px;
  padding: 18px;
  border-radius: var(--r-xl);
  background: linear-gradient(180deg, var(--card), var(--card2));
  border: 1px solid var(--stroke);
  backdrop-filter: var(--blur);
  box-shadow: var(--sh3);
}

/* -------------------------
   TITLE ROW
-------------------------- */
.titleRow{
  display:flex;
  align-items:flex-start;
  justify-content: space-between;
  gap: 16px;
  padding: 6px 6px 14px;
}

h1{
  margin: 0;
  font-size: var(--h1);
  letter-spacing: -0.7px;
}
.subtitle{
  margin: 6px 0 0;
  color: var(--muted);
  max-width: 76ch;
  font-size: 14.5px;
}

.actions{
  display:flex;
  gap: 10px;
  align-items:center;
  flex-wrap: wrap;
}

/* -------------------------
   BUTTONS
-------------------------- */
.btn{
  appearance: none;
  border: 0;
  cursor: pointer;
  min-height: var(--tap);
  padding: 11px 14px;
  border-radius: 16px;
  font-weight: 900;
  letter-spacing: .2px;
  color: #fff;
  background: linear-gradient(135deg, var(--primary), var(--primary2));
  box-shadow: 0 18px 40px rgba(11,59,145,.18);
  transition: transform .15s ease, filter .15s ease, box-shadow .15s ease;
  user-select: none;
}
.btn:hover{ filter: brightness(1.05); transform: translateY(-1px); }
.btn:active{ transform: translateY(0); filter: brightness(.98); }
.btn:focus-visible{ box-shadow: var(--sh1), var(--ring); }

.btn--ghost{
  color: var(--text);
  background: rgba(15,23,42,.05);
  border: 1px solid var(--stroke);
  box-shadow: none;
}
@media (prefers-color-scheme: dark){
  .btn--ghost{ background: rgba(255,255,255,.06); }
}

.btn--soft{
  color: var(--text);
  background: rgba(37,99,235,.10);
  border: 1px solid rgba(37,99,235,.22);
  box-shadow: none;
}
.btn--soft:hover{ background: rgba(37,99,235,.14); }

/* -------------------------
   INFO GRID
-------------------------- */
.infoGrid{
  display:grid;
  grid-template-columns: repeat(2, minmax(0,1fr));
  gap: 14px;
  margin-top: 6px;
}

.info{
  padding: 14px 14px;
  border-radius: var(--r-lg);
  border: 1px solid var(--stroke);
  background: rgba(255,255,255,.50);
  box-shadow: var(--sh1);
}
@media (prefers-color-scheme: dark){
  .info{ background: rgba(255,255,255,.04); }
}
.info small{
  display:block;
  font-size: 12px;
  color: var(--muted2);
  letter-spacing: .2px;
}
.info strong{
  display:block;
  margin-top: 4px;
  font-size: 16px;
}
.mini{
  display:block;
  margin-top: 4px;
  font-size: 12.5px;
  color: var(--muted2);
}

/* -------------------------
   SIDEBAR + GRID (DESKTOP)
-------------------------- */
@media (min-width: 1024px){
  .content{
    display:grid;
    grid-template-columns: var(--sidebar) minmax(0,1fr);
    gap: 16px;
    align-items:start;
  }

  /* full width blocks */
  .titleRow,
  .infoGrid,
  .group{ grid-column: 1 / -1; }

  /* right column content */
  .sectionTitle,
  article.qa.card{ grid-column: 2 / 3; }

  /* sidebar */
  .sidebarWrap{ grid-column: 1 / 2; }
  nav.card{
    position: sticky;
    top: 96px;
    max-height: calc(100vh - 120px);
    overflow:auto;
  }
}

/* -------------------------
   CARDS
-------------------------- */
.card{
  border-radius: var(--r-xl);
  border: 1px solid var(--stroke);
  background: rgba(255,255,255,.58);
  box-shadow: var(--sh1);
}
@media (prefers-color-scheme: dark){
  .card{ background: rgba(255,255,255,.05); }
}
html[data-prof="1"] .card{
  background: #fff;
  box-shadow: var(--sh1);
}

/* -------------------------
   SIDEBAR CARD
-------------------------- */
nav.card{
  padding: 16px 16px;
  margin-top: 14px;
  background: linear-gradient(180deg, rgba(255,255,255,.70), rgba(255,255,255,.52));
}
@media (prefers-color-scheme: dark){
  nav.card{ background: rgba(255,255,255,.05); }
}
.sidebarHead{
  display:flex;
  align-items:flex-start;
  justify-content: space-between;
  gap: 10px;
  margin-bottom: 10px;
}
.sidebarHead h2{
  margin: 0;
  font-size: 16px;
}
.sidebarTip{
  margin-top: 12px;
  padding-top: 10px;
  border-top: 1px dashed rgba(148,163,184,.28);
}

/* TOC list */
nav.card ol{
  margin: 0;
  padding-left: 18px;
  color: var(--muted);
}
nav.card li{ margin: 8px 0; }
nav.card a{
  font-weight: 900;
  color: var(--text);
}

/* Search/chips injected by JS */
.fpSearchWrap{ margin-bottom: 10px; }
.fpSearch{
  width: 100%;
  min-height: var(--tap);
  padding: 10px 12px;
  border-radius: 14px;
  border: 1px solid var(--stroke);
  background: rgba(255,255,255,.70);
  color: var(--text);
  outline: none;
  transition: box-shadow .15s ease, transform .15s ease;
}
@media (prefers-color-scheme: dark){
  .fpSearch{ background: rgba(255,255,255,.05); }
}
.fpSearch:focus{ box-shadow: var(--ring); }

.fpChip{
  min-height: 40px;
  padding: 7px 10px;
  border-radius: 999px;
  border: 1px solid var(--stroke);
  background: rgba(255,255,255,.60);
  color: var(--text);
  font-weight: 900;
  cursor: pointer;
  transition: transform .12s ease, filter .12s ease;
}
@media (prefers-color-scheme: dark){
  .fpChip{ background: rgba(255,255,255,.05); }
}
.fpChip:hover{ transform: translateY(-1px); filter: brightness(1.02); }
.fpChip:active{ transform: translateY(0); }

/* -------------------------
   INTEGRANTES (GROUP)
-------------------------- */
.group{
  margin-top: 16px;
  padding: 16px 16px;
}
.groupHead{
  display:flex;
  align-items:center;
  justify-content: space-between;
  gap: 12px;
  margin-bottom: 10px;
}
.groupHead h2{
  margin: 0;
  font-size: 16px;
}

.list{
  margin: 0;
  padding: 0;
  list-style: none;
}
.list li{
  padding: 10px 12px;
  border-radius: 16px;
  border: 1px solid rgba(148,163,184,.18);
  background: rgba(255,255,255,.55);
  margin-top: 8px;
  display:flex;
  align-items:center;
  justify-content: space-between;
  gap: 10px;
  font-size: 14.5px;
  box-shadow: 0 10px 22px rgba(2,6,23,.06);
}
@media (prefers-color-scheme: dark){
  .list li{ background: rgba(255,255,255,.05); }
}
.list li:first-child{ margin-top: 0; }

.pill{
  display:inline-flex;
  align-items:center;
  padding: 6px 10px;
  border-radius: 999px;
  font-size: 12px;
  font-weight: 900;
  color: #fff;
  background: linear-gradient(135deg, var(--primary), var(--primary2));
  box-shadow: 0 14px 26px rgba(11,59,145,.18);
}

/* -------------------------
   SECTION TITLE
-------------------------- */
.sectionTitle{
  display:flex;
  align-items:center;
  gap: 10px;
  margin: 22px 6px 12px;
}
.sectionTitle h2{
  margin: 0;
  font-size: var(--h2);
  letter-spacing: .2px;
}
.dot{
  width: 10px;
  height: 10px;
  border-radius: 50%;
  background: linear-gradient(135deg, var(--primary), var(--primary2));
  box-shadow: 0 14px 26px rgba(37,99,235,.18);
}

/* -------------------------
   QA
-------------------------- */
.qa{
  padding: 16px 16px;
  margin-top: 12px;
  position: relative;
  overflow: hidden;
  background: linear-gradient(180deg, rgba(255,255,255,.62), rgba(255,255,255,.52));
}
@media (prefers-color-scheme: dark){
  .qa{ background: rgba(255,255,255,.05); }
}
.qa::before{
  content:"";
  position:absolute;
  inset: 0;
  background:
    radial-gradient(700px 170px at 18% 0%, rgba(37,99,235,.16), transparent 60%);
  pointer-events:none;
}
@media (prefers-color-scheme: dark){
  .qa::before{
    background: radial-gradient(700px 170px at 18% 0%, rgba(96,165,250,.12), transparent 60%);
  }
}

.qaTop{
  display:flex;
  align-items:center;
  justify-content: space-between;
  gap: 10px;
}
.q{
  margin: 0;
  font-weight: 950;
  color: var(--text);
  font-size: 14.5px;
}
.a{
  margin: 10px 0 0;
  color: var(--muted);
  font-size: var(--p);
}
.a p{ margin: 10px 0; }
.a b{ color: var(--text); }

/* inside answers list */
.a .list{ margin-top: 10px; }
.a .list li{
  background: rgba(37,99,235,.08);
  border: 1px solid rgba(37,99,235,.18);
}

/* done badge */
.fpDoneBadge{
  margin-left: 10px;
  font-size: .82rem;
  font-weight: 950;
  color: var(--accent);
}

/* -------------------------
   FOOTER
-------------------------- */
.footer{
  width: min(var(--max), 100%);
  margin-top: 16px;
  display:flex;
  align-items:center;
  justify-content: space-between;
  gap: 10px;
  padding: 14px 14px;
  border-radius: var(--r-xl);
  background: linear-gradient(180deg, var(--card), var(--card2));
  border: 1px solid var(--stroke);
  backdrop-filter: var(--blur);
  box-shadow: var(--sh2);
  color: var(--muted);
  font-size: 12.5px;
}
.footer .muted{ color: var(--muted2); }

/* -------------------------
   TOAST
-------------------------- */
.toast{
  position: fixed;
  left: 50%;
  bottom: 18px;
  transform: translateX(-50%) translateY(10px);
  padding: 12px 14px;
  border-radius: 999px;
  background: linear-gradient(180deg, var(--card), var(--card2));
  border: 1px solid var(--stroke);
  backdrop-filter: var(--blur);
  box-shadow: var(--sh3);
  color: var(--text);
  font-weight: 950;
  opacity: 0;
  pointer-events: none;
  z-index: 9999;
  transition: opacity .2s ease, transform .2s ease;
  max-width: min(92vw, 720px);
  text-align: center;
}
.toast.show{
  opacity: 1;
  transform: translateX(-50%) translateY(0);
}

/* -------------------------
   DRAWER (MOBILE SIDEBAR)
   Works with:
   - #sidebarWrap (aside)
   - .drawerOverlay
   - .drawerOpen on sidebarWrap
   - body.noScroll
-------------------------- */
.drawerOverlay{
  position: fixed;
  inset: 0;
  background: rgba(2,6,23,.55);
  backdrop-filter: blur(4px);
  z-index: 80;
}

body.noScroll{ overflow: hidden; }

.sidebarWrap{
  /* default: normal flow */
}

@media (max-width: 1023px){
  .top{
    position: sticky;
    top: 10px;
  }
  .docMeta{ display:none; }
  .topRight{ display:block; }

  /* Drawer behavior */
  .sidebarWrap{
    position: fixed;
    inset: 0 auto 0 0;
    width: min(92vw, 420px);
    z-index: 90;
    transform: translateX(-110%);
    transition: transform .22s ease;
    padding: 12px;
  }
  .sidebarWrap.drawerOpen{
    transform: translateX(0);
  }
  nav.card{
    height: calc(100vh - 24px);
    overflow: auto;
    margin-top: 0;
    box-shadow: var(--sh3);
  }

  /* In mobile layout, content is single column */
  .content{
    display:block;
  }

  .titleRow{ flex-direction: column; }
  .actions{ width: 100%; }
  .btn{ width: 100%; justify-content: center; }
}

/* -------------------------
   MOBILE POLISH
-------------------------- */
@media (max-width: 720px){
  .page{ padding: 16px 12px 64px; }
  .top{ padding: 14px 14px; border-radius: 22px; }
  .content{ padding: 14px; border-radius: 22px; }
  .footer{
    padding: 12px 12px;
    border-radius: 22px;
    flex-direction: column;
    align-items: flex-start;
  }
  .infoGrid{ grid-template-columns: 1fr; }
  .brand{ min-width: 0; }
}

/* -------------------------
   ZEN MODE (data-zen)
-------------------------- */
html[data-zen="1"] .infoGrid,
html[data-zen="1"] nav.card,
html[data-zen="1"] .footer,
html[data-zen="1"] .group{
  opacity: .20;
  filter: blur(1px);
  transition: opacity .2s ease, filter .2s ease;
}

/* -------------------------
   PRINT / PDF
-------------------------- */
.no-print{ /* used by HTML/JS */ }

@media print {
  :root{
    --bg: #fff;
    --text: #000;
    --muted: #222;
    --muted2: #333;
    --card: #fff;
    --card2: #fff;
    --stroke: rgba(0,0,0,.18);
    --sh1: none;
    --sh2: none;
    --sh3: none;
    --blur: blur(0px);
    --bggrad: none;
  }

  body{ background: #fff !important; }
  .page{ padding: 0 !important; background: none !important; }

  .no-print,
  .drawerOverlay,
  .sidebarWrap,
  .fpHud,
  .fpPresenter,
  #readingProgress,
  #sectionsProgress,
  #fpConfetti,
  .fpParticle {
    display: none !important;
  }

  .top, .content, .footer, .card{
    background: #fff !important;
    box-shadow: none !important;
    backdrop-filter: none !important;
  }

  .content{
    display:block !important;
    border: none !important;
    padding: 0 !important;
  }
}
