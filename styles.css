/* =========================================================
   styles.css — Fábrica de Projetos (UNIMAR) — ULTRA COMPLETO
   - Layout 2 colunas (desktop): Sidebar + Conteúdo
   - Mobile/Tablet: Drawer (menu hambúrguer) + grids adaptativos
   - Dark mode (auto), Professor mode (data-prof), Zen mode (data-zen)
   - Cards, buttons, toast, print/PDF, acessibilidade
   ========================================================= */

/* -------------------------
   Reset
-------------------------- */
*,
*::before,
*::after { box-sizing: border-box; }

html, body { height: 100%; }

body {
  margin: 0;
  font-family: "Inter", system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
  line-height: 1.55;
  -webkit-font-smoothing: antialiased;
  text-rendering: geometricPrecision;
  background: var(--bg);
  color: var(--text);
}

img, svg, video, canvas { max-width: 100%; height: auto; }
button, input, select, textarea { font: inherit; }

a { color: var(--primary); text-decoration: none; }
a:hover { text-decoration: underline; }

html { scroll-behavior: smooth; }
@media (prefers-reduced-motion: reduce) {
  html { scroll-behavior: auto; }
}

/* -------------------------
   Design Tokens
-------------------------- */
:root{
  /* Base */
  --bg: #f6f8fc;
  --surface: rgba(255,255,255,.78);
  --surface-strong: #ffffff;
  --text: #0f172a;
  --muted: #475569;
  --muted-2: #64748b;
  --border: rgba(148,163,184,.30);

  /* Brand */
  --primary: #0b3b91;
  --primary-2: #2563eb;
  --accent: #10b981;
  --warn: #f59e0b;
  --danger: #ef4444;

  /* Radius/padding */
  --radius-xl: 22px;
  --radius-lg: 18px;
  --radius-md: 14px;
  --radius-sm: 12px;

  --pad-xl: 26px;
  --pad-lg: 20px;
  --pad-md: 16px;
  --pad-sm: 12px;

  /* Shadows */
  --shadow: 0 18px 40px rgba(2,6,23,.10);
  --shadow-2: 0 10px 22px rgba(2,6,23,.08);
  --shadow-3: 0 28px 70px rgba(2,6,23,.14);

  /* Rings */
  --ring: 0 0 0 4px rgba(11,59,145,.15);
  --ring-2: 0 0 0 3px rgba(37,99,235,.18);

  /* Glass */
  --glass: blur(14px);

  /* Background gradients */
  --grad:
    radial-gradient(900px 520px at 10% -10%, rgba(37,99,235,.22), transparent 60%),
    radial-gradient(900px 520px at 90% 0%, rgba(11,59,145,.16), transparent 60%),
    radial-gradient(700px 500px at 50% 110%, rgba(16,185,129,.12), transparent 60%);

  /* Layout widths */
  --max: 1180px;
  --sidebar-w: 340px;

  /* Typography scale */
  --h1: clamp(22px, 2.1vw, 32px);
  --h2: 16px;
  --p: 15px;

  /* Touch targets */
  --tap: 44px;
}

@media (prefers-color-scheme: dark) {
  :root{
    --bg: #0b1220;
    --surface: rgba(15,23,42,.62);
    --surface-strong: rgba(15,23,42,.86);
    --text: #e8eefc;
    --muted: #a8b3cf;
    --muted-2: #93a4c7;
    --border: rgba(148,163,184,.18);

    --shadow: 0 18px 50px rgba(0,0,0,.38);
    --shadow-2: 0 10px 24px rgba(0,0,0,.30);
    --shadow-3: 0 30px 80px rgba(0,0,0,.45);

    --ring: 0 0 0 4px rgba(96,165,250,.18);
    --ring-2: 0 0 0 3px rgba(52,211,153,.14);

    --grad:
      radial-gradient(900px 520px at 10% -10%, rgba(96,165,250,.16), transparent 60%),
      radial-gradient(900px 520px at 90% 0%, rgba(37,99,235,.12), transparent 60%),
      radial-gradient(700px 500px at 50% 110%, rgba(52,211,153,.10), transparent 60%);
  }
}

/* Professor mode (clean) */
html[data-prof="1"]{
  --bg: #f7f7fb;
  --surface: #ffffff;
  --surface-strong: #ffffff;
  --text: #0b1220;
  --muted: #334155;
  --muted-2: #475569;
  --border: rgba(100,116,139,.24);

  --shadow: 0 10px 20px rgba(2,6,23,.06);
  --shadow-2: 0 8px 16px rgba(2,6,23,.05);
  --shadow-3: 0 14px 30px rgba(2,6,23,.08);

  --glass: blur(0px);
}

/* -------------------------
   Global focus & selection
-------------------------- */
:focus-visible{
  outline: none;
  box-shadow: var(--ring);
  border-radius: 12px;
}

::selection{
  background: rgba(37,99,235,.22);
}

/* -------------------------
   Page container
-------------------------- */
.page{
  min-height: 100vh;
  display: grid;
  place-items: start center;
  padding: 28px 18px 72px;
  background: var(--grad), var(--bg);
}

/* top header (sticky on desktop) */
.top{
  width: min(var(--max), 100%);
  display: flex;
  gap: 18px;
  align-items: center;
  justify-content: space-between;
  padding: 18px 18px;
  border-radius: var(--radius-xl);
  background: var(--surface);
  border: 1px solid var(--border);
  backdrop-filter: var(--glass);
  box-shadow: var(--shadow-2);
  position: sticky;
  top: 12px;
  z-index: 50;
}

/* Brand */
.brand{
  display: flex;
  align-items: center;
  gap: 12px;
  min-width: 280px;
}
.seal{
  width: 46px;
  height: 46px;
  border-radius: 16px;
  display: grid;
  place-items: center;
  font-weight: 900;
  color: #fff;
  background: linear-gradient(135deg, var(--primary), var(--primary-2));
  box-shadow: 0 14px 30px rgba(11,59,145,.22);
  user-select: none;
}
.brandText strong{
  display: block;
  font-size: 14px;
  letter-spacing: .2px;
}
.brandText span{
  display: block;
  font-size: 12px;
  color: var(--muted);
  margin-top: 2px;
}

/* Meta */
.docMeta{
  text-align: right;
  color: var(--muted);
  font-size: 12.5px;
  line-height: 1.45;
}
.docMeta b{ color: var(--text); font-weight: 800; }

/* -------------------------
   Main content wrapper (becomes grid)
-------------------------- */
.content{
  width: min(var(--max), 100%);
  margin-top: 18px;
  padding: 22px 18px 18px;
  border-radius: var(--radius-xl);
  background: var(--surface);
  border: 1px solid var(--border);
  backdrop-filter: var(--glass);
  box-shadow: var(--shadow);
}

/* -------------------------
   Title Row
-------------------------- */
.titleRow{
  display:flex;
  align-items: flex-start;
  justify-content: space-between;
  gap: 16px;
  padding: 6px 4px 12px;
}

h1{
  margin: 0;
  font-size: var(--h1);
  letter-spacing: -0.6px;
}
.subtitle{
  margin: 6px 0 0;
  color: var(--muted);
  max-width: 74ch;
  font-size: 14.5px;
}

.actions{
  display:flex;
  gap: 10px;
  align-items: center;
  flex-wrap: wrap;
}

/* -------------------------
   Buttons
-------------------------- */
.btn{
  appearance: none;
  border: 0;
  cursor: pointer;
  min-height: var(--tap);
  padding: 10px 14px;
  border-radius: 14px;
  font-weight: 900;
  letter-spacing: .2px;
  color: #fff;
  background: linear-gradient(135deg, var(--primary), var(--primary-2));
  box-shadow: 0 16px 30px rgba(11,59,145,.20);
  transition: transform .15s ease, filter .15s ease, box-shadow .15s ease;
  user-select: none;
}
.btn:hover{ filter: brightness(1.05); transform: translateY(-1px); }
.btn:active{ transform: translateY(0); filter: brightness(.98); }
.btn:focus-visible{ outline: none; box-shadow: var(--shadow-2), var(--ring); }

.btn--ghost{
  color: var(--text);
  background: rgba(15,23,42,.06);
  box-shadow: none;
  border: 1px solid var(--border);
}
@media (prefers-color-scheme: dark){
  .btn--ghost{ background: rgba(255,255,255,.06); }
}

.btn--soft{
  color: var(--text);
  background: rgba(37,99,235,.08);
  border: 1px solid rgba(37,99,235,.18);
  box-shadow: none;
}
.btn--soft:hover{ filter:none; background: rgba(37,99,235,.12); }
.btn--soft:focus-visible{ box-shadow: var(--ring); }

/* -------------------------
   Cards
-------------------------- */
.card{
  border-radius: var(--radius-xl);
  border: 1px solid var(--border);
  background: rgba(255,255,255,.66);
  backdrop-filter: var(--glass);
  box-shadow: var(--shadow-2);
}
@media (prefers-color-scheme: dark){
  .card{ background: rgba(2,6,23,.28); }
}
html[data-prof="1"] .card{
  background: #fff;
  backdrop-filter: none;
}

/* -------------------------
   Info grid
-------------------------- */
.infoGrid{
  display:grid;
  grid-template-columns: repeat(2, minmax(0, 1fr));
  gap: 14px;
  margin-top: 12px;
}
.info{
  padding: 14px 14px;
  border-radius: var(--radius-lg);
  background: rgba(255,255,255,.55);
  border: 1px solid var(--border);
  backdrop-filter: blur(10px);
  box-shadow: 0 10px 22px rgba(2,6,23,.05);
}
@media (prefers-color-scheme: dark){
  .info{ background: rgba(2,6,23,.24); }
}
.info small{
  display:block;
  font-size: 12px;
  color: var(--muted);
  letter-spacing: .2px;
}
.info strong{
  display:block;
  font-size: 16px;
  margin-top: 4px;
}
.mini{
  display:block;
  font-size: 12.5px;
  color: var(--muted-2);
  margin-top: 4px;
}

/* -------------------------
   Section title
-------------------------- */
.sectionTitle{
  display:flex;
  align-items:center;
  gap: 10px;
  margin: 22px 4px 12px;
}
.sectionTitle h2{
  margin: 0;
  font-size: var(--h2);
  letter-spacing: .2px;
}
.dot{
  width: 10px;
  height: 10px;
  border-radius: 50%;
  background: linear-gradient(135deg, var(--primary), var(--primary-2));
  box-shadow: 0 10px 20px rgba(37,99,235,.20);
}

/* -------------------------
   Integrantes (group)
-------------------------- */
.group{
  margin-top: 16px;
  padding: 16px 16px;
}
.groupHead{
  display:flex;
  align-items:center;
  justify-content: space-between;
  gap: 12px;
  margin-bottom: 10px;
}
.groupHead h2{
  margin: 0;
  font-size: 16px;
}

/* Lists */
.list{
  margin: 0;
  padding: 0;
  list-style: none;
}
.list li{
  padding: 10px 10px;
  border-radius: 14px;
  border: 1px solid transparent;
  background: rgba(15,23,42,.04);
  margin-top: 8px;
  display:flex;
  align-items:center;
  justify-content: space-between;
  gap: 10px;
  font-size: 14px;
}
@media (prefers-color-scheme: dark){
  .list li{ background: rgba(255,255,255,.06); }
}
.list li:first-child{ margin-top: 0; }

.pill{
  display:inline-flex;
  align-items:center;
  padding: 6px 10px;
  border-radius: 999px;
  font-size: 12px;
  font-weight: 900;
  color: #fff;
  background: linear-gradient(135deg, var(--primary), var(--primary-2));
  box-shadow: 0 10px 20px rgba(11,59,145,.18);
}

/* -------------------------
   Q/A cards
-------------------------- */
.qa{
  padding: 16px 16px;
  margin-top: 12px;
  position: relative;
  overflow: hidden;
}
.qa::before{
  content:"";
  position:absolute;
  inset: 0;
  background: radial-gradient(700px 140px at 20% 0%, rgba(37,99,235,.12), transparent 60%);
  pointer-events:none;
}
@media (prefers-color-scheme: dark){
  .qa::before{ background: radial-gradient(700px 140px at 20% 0%, rgba(96,165,250,.10), transparent 60%); }
}
.qaTop{
  display:flex;
  align-items:center;
  justify-content: space-between;
  gap: 10px;
}
.q{
  margin: 0;
  font-weight: 900;
  color: var(--text);
  font-size: 14.5px;
}
.a{
  margin: 10px 0 0;
  color: var(--muted);
  font-size: var(--p);
}
.a p{ margin: 10px 0; }
.a b{ color: var(--text); }

/* Within answers: lists */
.a .list{ margin-top: 10px; }
.a .list li{
  background: rgba(37,99,235,.06);
  border: 1px solid rgba(37,99,235,.10);
}
@media (prefers-color-scheme: dark){
  .a .list li{ background: rgba(37,99,235,.10); }
}

/* Done badge used by JS */
.fpDoneBadge{
  margin-left: 10px;
  font-size: .8rem;
  font-weight: 900;
  color: var(--accent);
}

/* -------------------------
   Footer
-------------------------- */
.footer{
  width: min(var(--max), 100%);
  margin-top: 16px;
  display:flex;
  align-items:center;
  justify-content: space-between;
  gap: 10px;
  padding: 14px 14px;
  border-radius: var(--radius-xl);
  background: var(--surface);
  border: 1px solid var(--border);
  backdrop-filter: var(--glass);
  box-shadow: var(--shadow-2);
  color: var(--muted);
  font-size: 12.5px;
}
.footer .muted{ color: var(--muted-2); }

/* -------------------------
   Toast
-------------------------- */
.toast{
  position: fixed;
  left: 50%;
  bottom: 18px;
  transform: translateX(-50%) translateY(10px);
  padding: 12px 14px;
  border-radius: 999px;
  background: rgba(255,255,255,.78);
  border: 1px solid var(--border);
  backdrop-filter: blur(12px);
  box-shadow: var(--shadow-3);
  color: var(--text);
  font-weight: 900;
  opacity: 0;
  pointer-events: none;
  z-index: 9999;
  transition: opacity .2s ease, transform .2s ease;
  max-width: min(92vw, 720px);
  text-align: center;
}
@media (prefers-color-scheme: dark){
  .toast{ background: rgba(15,23,42,.85); }
}
.toast.show{
  opacity: 1;
  transform: translateX(-50%) translateY(0);
}

/* -------------------------
   Responsive main layout: Sidebar + Content
   Strategy:
   - In desktop: nav.card becomes sticky sidebar
   - Content remains fluid
   NOTE: This requires nav.card to exist (sumário)
-------------------------- */
@media (min-width: 1024px){
  .content{
    display: grid;
    grid-template-columns: var(--sidebar-w) minmax(0, 1fr);
    gap: 16px;
    align-items: start;
  }

  /* Put titleRow full width on top */
  .titleRow{ grid-column: 1 / -1; }

  /* infoGrid full width */
  .infoGrid{ grid-column: 1 / -1; }

  /* group full width (integrantes) */
  .group{ grid-column: 1 / -1; }

  /* section titles + QAs on the right column */
  .sectionTitle,
  article.qa.card{
    grid-column: 2 / 3;
  }

  /* Sidebar: nav.card */
  nav.card{
    grid-column: 1 / 2;
    position: sticky;
    top: 92px; /* below header sticky */
    max-height: calc(100vh - 120px);
    overflow: auto;
    padding: 16px 16px;
  }

  /* Nice scrollbar */
  nav.card::-webkit-scrollbar{ width: 10px; }
  nav.card::-webkit-scrollbar-thumb{
    background: rgba(148,163,184,.35);
    border-radius: 999px;
    border: 2px solid transparent;
    background-clip: padding-box;
  }
}

/* nav styles */
nav.card{
  padding: 16px 16px;
  margin-top: 14px; /* on mobile it stacks */
}
nav.card h2{
  margin: 0 0 10px;
  font-size: 16px;
}
nav.card ol{
  margin: 0;
  padding-left: 18px;
  color: var(--muted);
}
nav.card li{ margin: 6px 0; }
nav.card a{ font-weight: 800; }

/* search + chips created by JS */
.fpSearchWrap{ margin-bottom: 10px; }
.fpSearch{
  width: min(520px, 100%);
  min-height: var(--tap);
  padding: 10px 12px;
  border-radius: 12px;
  border: 1px solid var(--border);
  background: rgba(255,255,255,.75);
  color: var(--text);
  outline: none;
}
.fpSearch:focus{ box-shadow: var(--ring); }
.fpChip{
  min-height: 40px;
  padding: 6px 10px;
  border-radius: 999px;
  border: 1px solid var(--border);
  background: rgba(241,245,249,.75);
  color: var(--text);
  font-weight: 900;
  cursor: pointer;
}
.fpChip:hover{ filter: brightness(1.03); }
.fpChip:active{ transform: scale(.99); }

@media (prefers-color-scheme: dark){
  .fpSearch{ background: rgba(2,6,23,.25); }
  .fpChip{ background: rgba(2,6,23,.25); }
}

/* -------------------------
   Mobile & Tablet improvements
-------------------------- */
@media (max-width: 1023px){
  .top{
    position: static; /* stickiness can feel heavy on mobile */
  }
}

@media (max-width: 860px){
  .infoGrid{ grid-template-columns: 1fr; }
  .docMeta{ display: none; } /* deixa o header mais limpo no mobile */
  .brand{ min-width: 0; }
}

/* Better mobile spacing */
@media (max-width: 520px){
  .page{ padding: 16px 12px 64px; }
  .top{ padding: 14px 14px; border-radius: 18px; }
  .content{ padding: 16px 14px; border-radius: 18px; }
  .footer{ padding: 12px 12px; border-radius: 18px; flex-direction: column; align-items:flex-start; }
  .actions{ width: 100%; }
  .btn{ width: 100%; justify-content: center; }
  .titleRow{ flex-direction: column; }
}

/* Ultra wide screens: keep max readable width */
@media (min-width: 1400px){
  :root{ --max: 1260px; --sidebar-w: 360px; }
}

/* -------------------------
   Zen mode effects (JS uses data-zen)
-------------------------- */
html[data-zen="1"] .infoGrid,
html[data-zen="1"] nav.card,
html[data-zen="1"] .footer,
html[data-zen="1"] .group{
  opacity: .20;
  filter: blur(1px);
  transition: opacity .2s ease, filter .2s ease;
}

/* -------------------------
   Print / PDF
-------------------------- */
.no-print{ /* used by html/js */ }

@media print {
  :root{
    --bg: #ffffff;
    --surface: #ffffff;
    --surface-strong: #ffffff;
    --text: #000000;
    --muted: #222;
    --muted-2: #333;
    --border: rgba(0,0,0,.18);
    --shadow: none;
    --shadow-2: none;
    --shadow-3: none;
    --glass: blur(0px);
  }

  body{ background: #fff !important; }
  .page{ padding: 0 !important; background: none !important; }

  .no-print,
  .fpHud,
  .fpPresenter,
  #readingProgress,
  #sectionsProgress,
  #fpConfetti,
  .fpParticle {
    display: none !important;
  }

  .top, .content, .footer, .card{
    box-shadow: none !important;
    backdrop-filter: none !important;
    background: #fff !important;
  }

  /* Print as single column for readability */
  .content{
    display: block !important;
    padding: 0 !important;
    border: none !important;
  }

  nav.card{ display: none !important; } /* sumário não precisa no PDF */
  a{ text-decoration: none !important; color: #000 !important; }
}

/* -------------------------
   Reduced motion
-------------------------- */
@media (prefers-reduced-motion: reduce){
  *, *::before, *::after{
    transition: none !important;
    animation: none !important;
  }
}





